<%= form_with(model: [:admin, @product], local: true, class: "space-y-6") do |form| %>
  <div class="field">
    <%= form.label :name, "Nombre", class: "block text-sm font-medium text-gray-700 dark:text-gray-300" %>
    <%= form.text_field :name, class: "mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300" %>
  </div>

  <div class="field">
    <%= form.label :description, "Descripción", class: "block text-sm font-medium text-gray-700 dark:text-gray-300" %>
    <%= form.text_area :description, class: "mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300" %>
  </div>

  <div class="field">
    <%= form.label :price, "Precio", class: "block text-sm font-medium text-gray-700 dark:text-gray-300" %>
    <%= form.number_field :price, class: "mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300" %>
  </div>

  <div class="field">
    <%= form.label :stock, "Stock", class: "block text-sm font-medium text-gray-700 dark:text-gray-300" %>
    <%= form.number_field :stock, class: "mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300" %>
  </div>

  <div class="field">
    <%= form.label :category_id, "Categoría", class: "block text-sm font-medium text-gray-700 dark:text-gray-300" %>
    <%= form.collection_select :category_id, Category.all, :id, :name, {}, class: "mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300" %>
  </div>

  <div class="field">
    <%= form.label :size, "Tamaño", class: "block text-sm font-medium text-gray-700 dark:text-gray-300" %>
    <%= form.text_field :size, required: false, class: "mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300" %>
  </div>

  <div class="field">
    <%= form.label :color, "Color", class: "block text-sm font-medium text-gray-700 dark:text-gray-300" %>
    <%= form.text_field :color, required: false, class: "mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300" %>
  </div>

  <div class="field">
    <%= form.label :entry_at, "Fecha de Ingreso", class: "block text-sm font-medium text-gray-700 dark:text-gray-300" %>
    <%= form.date_field :entry_at, value: @product.entry_at || Date.today, class: "mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300" %>
  </div>

  <div class="field">
    <%= form.label :images, "Imágenes", class: "block text-sm font-medium text-gray-700 dark:text-gray-300" %>
    <% if @product.new_record? %>
      <%= form.file_field :images, multiple: true, required: true, class: "mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300" %>
    <% else %>
      <div class="mb-2">
        <% if @product.images.attached? %>
          <p class="text-sm text-gray-600 dark:text-gray-400 mb-2">Current images:</p>
          <div class="grid grid-cols-4 gap-4">
            <% @product.images.each do |image| %>
              <div class="relative">
                <%= image_tag image, class: "w-full h-24 object-cover rounded" %>
              </div>
            <% end %>
          </div>
        <% end %>
      </div>
      <%= form.file_field :images, multiple: true, class: "mt-1 block w-full shadow-sm sm:text-sm border-gray-300 rounded-md dark:bg-gray-700 dark:border-gray-600 dark:text-gray-300" %>
      <p class="mt-1 text-sm text-gray-500 dark:text-gray-400">Leave empty to keep current images</p>
    <% end %>
  </div>

  <div class="actions">
    <%= form.submit class: "inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 dark:bg-indigo-500 dark:hover:bg-indigo-600 dark:focus:ring-indigo-400" %>
  </div>
<% end %>
